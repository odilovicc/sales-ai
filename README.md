# ü§ñ Telegram Lead Bot - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –ª–∏–¥–æ–≤

–ì–æ—Ç–æ–≤–æ–µ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –ª–∏–¥–æ–≤ –∏–∑ Telegram –∫–∞–Ω–∞–ª–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ AI (Ollama + Llama 3.2).

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **Userbot –Ω–∞ GramJS** - –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Telegram (–∞–Ω–∞–ª–æ–≥ Telethon –¥–ª—è TypeScript)
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ **AI —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–∏–¥–æ–≤ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π LLM (Llama 3.2)
- ‚úÖ **–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `leads.xlsx` —Å 7 –∫–æ–ª–æ–Ω–∫–∞–º–∏
- ‚úÖ **Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–∏–¥–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–π AI** - Ollama + Llama 3.2 (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω, –ø—Ä–∏–≤–∞—Ç–Ω–æ)
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ç–æ** - –ê–Ω–∞–ª–∏–∑ –ø–æ–¥–ø–∏—Å–µ–π –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º
- ‚úÖ **–ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏** - –ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Excel
- ‚úÖ **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ—Å—Ç—å** - –ì–∏–±–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `.env`

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Telegram Lead Bot                           ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ  ‚îÇ   Telegram   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   GramJS     ‚îÇ                    ‚îÇ
‚îÇ  ‚îÇ   Channels   ‚îÇ      ‚îÇ   Client     ‚îÇ                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ
‚îÇ                                 ‚îÇ                            ‚îÇ
‚îÇ                                 ‚ñº                            ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ                        ‚îÇ  Message       ‚îÇ                   ‚îÇ
‚îÇ                        ‚îÇ  Processing    ‚îÇ                   ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                 ‚îÇ                            ‚îÇ
‚îÇ                                 ‚ñº                            ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ                        ‚îÇ   Ollama       ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ llama3.2     ‚îÇ
‚îÇ                        ‚îÇ   (Local LLM)  ‚îÇ     (Local)      ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                 ‚îÇ                            ‚îÇ
‚îÇ                                 ‚ñº                            ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ                        ‚îÇ  Lead Filter   ‚îÇ                   ‚îÇ
‚îÇ                        ‚îÇ  & Validation  ‚îÇ                   ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                 ‚îÇ                            ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ                    ‚ñº                         ‚ñº              ‚îÇ
‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ           ‚îÇ  Excel Export  ‚îÇ      ‚îÇ  Google Sheets   ‚îÇ     ‚îÇ
‚îÇ           ‚îÇ  leads.xlsx    ‚îÇ      ‚îÇ  Integration     ‚îÇ     ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

The LLM analyzes messages for companies in the following sectors:

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª–∏–¥–æ–≤

- –ë–∏–æ—Ö–∏–º–∏—è (Biochemistry)

LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∏—â–µ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–µ–∫—Ç–æ—Ä–∞—Ö:- –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤–æ–¥—ã (Water production)

- –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Å–Ω–µ–∫–æ–≤ (Snack production)

- **–ë–∏–æ—Ö–∏–º–∏—è** - –ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è, –º–æ—é—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞- –ü—Ä–æ–¥–∞–∂–∞ –∫–µ—à—å—é, –æ—Ä–µ—Ö–æ–≤, —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç–æ–≤ (Cashew, nuts, dried fruits sales)

- **–°–Ω–µ–∫–∏** - –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Å–Ω–µ–∫–æ–≤, –∫—É–∫—É—Ä—É–∑–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏, —á–∏–ø—Å—ã- –°–º–µ–∂–Ω—ã–µ FMCG —Ç–æ–≤–∞—Ä—ã (Related FMCG products)

- **–í–æ–¥–∞** - –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –≤–æ–¥—ã, –Ω–∞–ø–∏—Ç–∫–æ–≤

- **–ö–µ—à—å—é** - –û—Ä–µ—Ö–∏, —Å—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã, –∫–µ—à—å—é## üöÄ Quick Start



**–°—Ç—Ä–æ–≥–∏–µ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** - –î—Ä—É–≥–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è### Prerequisites



**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –ª–∏–¥–∞:**- [Bun](https://bun.sh) installed

- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ (–Ω–µ —Å—Ç—Ä–∞–Ω–∞/–≥–æ—Ä–æ–¥!)- Telegram account

- –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞- API credentials from https://my.telegram.org/apps

- –û–¥–Ω–∞ –∏–∑ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–π- [Ollama](https://ollama.com) installed with Llama 3.2 model



## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç### Installation



### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è1. **Clone or navigate to the project:**

   ```bash

- [Bun](https://bun.sh) —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω   cd /Users/notprxgrammer/personal-projects/bot-ai

- –ê–∫–∫–∞—É–Ω—Ç Telegram   ```

- API credentials —Å https://my.telegram.org/apps

- [Ollama](https://ollama.com) —Å –º–æ–¥–µ–ª—å—é Llama 3.22. **Install dependencies:**

   ```bash

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞ 5 –º–∏–Ω—É—Ç   bun install

   ```

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

   ```bash3. **Setup Ollama (see [OLLAMA_SETUP.md](OLLAMA_SETUP.md) for details):**

   bun install   ```bash

   ```   # Install Ollama

   curl -fsSL https://ollama.com/install.sh | sh

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Ollama:**   

   ```bash   # Start Ollama server

   # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Ollama (macOS/Linux)   ollama serve

   curl -fsSL https://ollama.com/install.sh | sh   

      # Download Llama 3.2 model

   # –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)   ollama pull llama3.2

   ollama serve   ```

   

   # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ Llama 3.24. **Configure environment variables:**

   ollama pull llama3.2   ```bash

   ```   cp .env.example .env

   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`:**   

   ```env   Edit `.env` and fill in your credentials:

   # Telegram API (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ my.telegram.org/apps)   ```env

   API_ID=1234567   API_ID=your_api_id

   API_HASH=your_hash_here   API_HASH=your_api_hash

   PHONE_NUMBER=+998901234567   PHONE_NUMBER=+1234567890

      CHANNELS=@channel1,@channel2

   # –ö–∞–Ω–∞–ª—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)   ```

   CHANNELS=@UZB_Oziq_Ovqat,@Diler_UZB,@dillerlar_uz

   5. **Run the userbot:**

   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞   ```bash

   ANALYZE_HISTORY=false        # –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ?   bun run index.ts

   HISTORY_LIMIT=50             # –°–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å   ```

   MIN_MESSAGE_LENGTH=20        # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

   HISTORY_DELAY=1000           # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–º—Å)## üìÅ Project Structure

   CHANNEL_DELAY=2000           # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏ (–º—Å)

   ``````

bot-ai/

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**‚îú‚îÄ‚îÄ index.ts                    # Main entry point

   ```bash‚îú‚îÄ‚îÄ package.json               # Dependencies and scripts

   bun start‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript configuration

   ```‚îú‚îÄ‚îÄ .env.example              # Environment template

‚îú‚îÄ‚îÄ .gitignore               # Git ignore rules

5. **–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ‚îú‚îÄ‚îÄ README.md                # This file

‚îî‚îÄ‚îÄ src/

–ì–æ—Ç–æ–≤–æ! –ë–æ—Ç –Ω–∞—á–Ω–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–∏–¥—ã –≤ `leads.xlsx`    ‚îú‚îÄ‚îÄ config/

    ‚îÇ   ‚îî‚îÄ‚îÄ index.ts         # Configuration management

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞    ‚îú‚îÄ‚îÄ services/

    ‚îÇ   ‚îú‚îÄ‚îÄ telegram.ts      # GramJS client & operations

```    ‚îÇ   ‚îú‚îÄ‚îÄ llm.ts          # LLM integration

bot-ai/    ‚îÇ   ‚îî‚îÄ‚îÄ excel.ts        # Excel export functionality

‚îú‚îÄ‚îÄ index.ts                       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞    ‚îú‚îÄ‚îÄ types/

‚îú‚îÄ‚îÄ package.json                   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏    ‚îÇ   ‚îî‚îÄ‚îÄ index.ts        # TypeScript interfaces

‚îú‚îÄ‚îÄ .env                          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è    ‚îî‚îÄ‚îÄ utils/

‚îú‚îÄ‚îÄ leads.xlsx                    # Excel —Å –ª–∏–¥–∞–º–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)        ‚îî‚îÄ‚îÄ logger.ts       # Logging utilities

‚îú‚îÄ‚îÄ google-credentials.json       # Credentials –¥–ª—è Google Sheets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)```

‚îÇ

‚îî‚îÄ‚îÄ src/## üîß Configuration

    ‚îú‚îÄ‚îÄ config/

    ‚îÇ   ‚îî‚îÄ‚îÄ index.ts              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π### Telegram API Credentials

    ‚îú‚îÄ‚îÄ services/

    ‚îÇ   ‚îú‚îÄ‚îÄ telegram.ts           # Telegram –∫–ª–∏–µ–Ω—Ç (GramJS)1. Go to https://my.telegram.org/apps

    ‚îÇ   ‚îú‚îÄ‚îÄ llm.ts                # LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (Ollama)2. Create a new application

    ‚îÇ   ‚îú‚îÄ‚îÄ excel.ts              # Excel —ç–∫—Å–ø–æ—Ä—Ç3. Copy `api_id` and `api_hash`

    ‚îÇ   ‚îî‚îÄ‚îÄ googleSheets.ts       # Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è4. Add them to your `.env` file

    ‚îú‚îÄ‚îÄ types/

    ‚îÇ   ‚îî‚îÄ‚îÄ index.ts              # TypeScript —Ç–∏–ø—ã### LLM Configuration

    ‚îî‚îÄ‚îÄ utils/

        ‚îî‚îÄ‚îÄ logger.ts             # –¶–≤–µ—Ç–Ω–æ–π –ª–æ–≥–≥–µ—ÄThe project uses **Ollama** with **Llama 3.2** model running locally. No API keys needed!

```

**Make sure Ollama is running before starting the bot:**

## üìù –ö–æ–º–∞–Ω–¥—ã```bash

ollama serve

### –û—Å–Ω–æ–≤–Ω—ã–µ```



```bashFor detailed Ollama setup instructions, see [OLLAMA_SETUP.md](OLLAMA_SETUP.md).

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

bun start**Benefits of using local Ollama:**

- üöÄ Faster response times (no network latency)

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ-–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)- üí∞ Free - no API costs

bun run dev- üîí Privacy - data stays on your computer

- üîÑ Works offline

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Ollama

bun run test:ollama### Channels Configuration



# –¢–µ—Å—Ç Google Sheets –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—èAdd channels to monitor in one of two ways:

bun run test:google

1. **Environment variable** (recommended):

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–∏–¥–æ–≤ –≤ Google Sheets   ```env

bun run sync:google   CHANNELS=@channel1,@channel2,https://t.me/channel3

```   ```



## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Excel —Ñ–∞–π–ª–∞2. **Code** - Edit `src/config/index.ts`:

   ```typescript

–õ–∏–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `leads.xlsx` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏:   export const DEFAULT_CHANNELS: string[] = [

     '@example_channel',

| –ö–æ–ª–æ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |     'https://t.me/another_channel',

|---------|----------|--------|   ];

| **Name** | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | OKEY, Bravo, BIOLIFE |   ```

| **Phone** | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | +998901234567 |

| **Category** | –ö–∞—Ç–µ–≥–æ—Ä–∏—è (4 —Ç–∏–ø–∞) | –°–Ω–µ–∫–∏, –ë–∏–æ—Ö–∏–º–∏—è, –í–æ–¥–∞, –ö–µ—à—å—é |## üìä Excel Output

| **Channel** | –ò—Å—Ç–æ—á–Ω–∏–∫ (–∫–∞–Ω–∞–ª) | @UZB_Oziq_Ovqat |

| **MessageLink** | –ö–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ | https://t.me/channel/123 |Leads are automatically saved to `leads.xlsx` with the following columns:

| **OriginalMessage** | –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç | –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è |

| **Date** | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è | 28.11.2024, 14:30:25 || –ò–º—è | –¢–µ–ª–µ—Ñ–æ–Ω | –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è |

|-----|---------|-----------|------------------------|-----------------|

**–§–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ª–∏–¥–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.| Company name | Phone | Category | Original message text | Timestamp |



## üéõ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞The file is created automatically on the first lead and updated in real-time.



### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (.env)## üîç How It Works



#### ANALYZE_HISTORY1. **Initialization** - Client connects to Telegram using your credentials

**–¢–∏–ø:** `true` / `false`  2. **Authentication** - You enter the code sent to your phone

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `false`3. **Channel Joining** - Automatically joins specified channels (with rate limiting)

4. **Message Listening** - Monitors all new messages in real-time

–ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–∏ –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:5. **LLM Analysis** - Each message is sent to LLM for qualification

- `true` - –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π6. **Lead Extraction** - LLM returns structured data (name, phone, category)

- `false` - —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)7. **Excel Export** - Qualified leads are saved to Excel automatically



```env## üõ°Ô∏è Error Handling

ANALYZE_HISTORY=true   # –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é

ANALYZE_HISTORY=false  # –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)The userbot includes comprehensive error handling:

```

- **Rate Limiting** - Automatic delays when joining channels

#### HISTORY_LIMIT- **Reconnection** - Auto-reconnect on connection loss

**–¢–∏–ø:** —á–∏—Å–ª–æ  - **Graceful Shutdown** - Clean disconnect on Ctrl+C

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `50`  - **Error Logging** - Detailed logs for debugging

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** `20-100`- **Session Persistence** - Saves session to avoid re-authentication



–°–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑ –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞:## üìù Scripts



```env```bash

HISTORY_LIMIT=20   # –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫# Run the userbot

HISTORY_LIMIT=50   # –ë–∞–ª–∞–Ω—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)bun run start

HISTORY_LIMIT=100  # –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑

```# Run with auto-reload (development)

bun run dev

#### MIN_MESSAGE_LENGTH

**–¢–∏–ø:** —á–∏—Å–ª–æ  # Test Ollama connection

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `20`bun run test:ollama



–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–∫–æ—Ä–æ—Ç–∫–∏–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è):# Sync leads to Google Sheets

bun run sync:google

```env```

MIN_MESSAGE_LENGTH=15  # –ú–µ–Ω–µ–µ —Å—Ç—Ä–æ–≥–æ

MIN_MESSAGE_LENGTH=20  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é## üîÑ Google Sheets Integration

MIN_MESSAGE_LENGTH=30  # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ

```–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–∏–¥–æ–≤ –∏–∑ `leads.xlsx` –≤ Google Sheets —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã.



#### HISTORY_DELAY### –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:

**–¢–∏–ø:** —á–∏—Å–ª–æ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)  

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `1000`1. **–°–æ–∑–¥–∞–π—Ç–µ Service Account** –≤ Google Cloud Console

2. **–°–∫–∞—á–∞–π—Ç–µ JSON –∫–ª—é—á** –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `google-credentials.json`

–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏–π (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å Ollama):3. **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø** –∫ —Ç–∞–±–ª–∏—Ü–µ Service Account email

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é**:

```env   ```bash

HISTORY_DELAY=500   # –ë—ã—Å—Ç—Ä–µ–µ   bun run sync:google

HISTORY_DELAY=1000  # –ë–∞–ª–∞–Ω—Å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)   ```

HISTORY_DELAY=2000  # –ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ

```**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: –°–º. [GOOGLE_SHEETS_SETUP.md](GOOGLE_SHEETS_SETUP.md)



#### CHANNEL_DELAY### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

**–¢–∏–ø:** —á–∏—Å–ª–æ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)  

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `2000`- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã (–ø–æ –∏–º–µ–Ω–∏ + —Ç–µ–ª–µ—Ñ–æ–Ω—É)

- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–ë–∏–æ—Ö–∏–º–∏—è ‚Üí Bioximiya, –°–Ω–µ–∫–∏ ‚Üí Snacks)

–ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∫–∞–Ω–∞–ª–∞–º–∏ –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∏—Å—Ç–æ—Ä–∏–∏:- ‚úÖ –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º

- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```env- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ batch-–æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤

CHANNEL_DELAY=1000  # –ë—ã—Å—Ç—Ä–µ–µ

CHANNEL_DELAY=2000  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é## üîê Security Notes

CHANNEL_DELAY=3000  # –ú–µ–¥–ª–µ–Ω–Ω–µ–µ

```- ‚ö†Ô∏è **Never commit `.env`** - Contains sensitive credentials

- ‚ö†Ô∏è **Session files** - Keep `*.session` files private

### üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏- ‚ö†Ô∏è **API Keys** - Protect your LLM API keys

- ‚ö†Ô∏è **Rate Limits** - Respect Telegram's rate limits to avoid bans

**–ë—ã—Å—Ç—Ä—ã–π —Ä–µ–∂–∏–º (—Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ):**

```env## üêõ Troubleshooting

ANALYZE_HISTORY=false

MIN_MESSAGE_LENGTH=20### "Missing required environment variable"

```- Check that all variables in `.env` are set

- Ensure `.env` file is in the project root

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º:**

```env### "Authentication failed"

ANALYZE_HISTORY=true- Verify `API_ID` and `API_HASH` are correct

HISTORY_LIMIT=50- Check that phone number includes country code (+)

MIN_MESSAGE_LENGTH=20

HISTORY_DELAY=1000### "FLOOD_WAIT" error

CHANNEL_DELAY=2000- Telegram rate limit triggered

```- The bot will automatically wait and retry

- Consider reducing the number of channels to join at once

**–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑:**

```env### LLM not working

ANALYZE_HISTORY=true- Verify `LLM_API_KEY` and `LLM_API_URL` are correct

HISTORY_LIMIT=100- Check the `callLLM()` function matches your provider's API

MIN_MESSAGE_LENGTH=15- Review logs for API error messages

HISTORY_DELAY=1500

CHANNEL_DELAY=3000## üß™ Testing

```

For testing without LLM API, use the mock function:

**–î–ª—è —Å–ª–∞–±–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:**

```env```typescript

ANALYZE_HISTORY=true// In src/services/telegram.ts, replace:

HISTORY_LIMIT=20const llmResponse = await parseMessageThroughLLM(messageText);

MIN_MESSAGE_LENGTH=25

HISTORY_DELAY=2000// With:

CHANNEL_DELAY=3000import { mockLLM } from './llm';

```const llmResponse = await mockLLM(messageText);

```

## üîÑ Google Sheets –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

## üìö Dependencies

### –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (5 –º–∏–Ω—É—Ç)

- **telegram** (GramJS) - Telegram client library

1. **–°–æ–∑–¥–∞–π—Ç–µ Service Account** –≤ [Google Cloud Console](https://console.cloud.google.com):- **exceljs** - Excel file generation

   - –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç- **input** - Interactive CLI input

   - –í–∫–ª—é—á–∏—Ç–µ Google Sheets API- **bun** - JavaScript runtime

   - –°–æ–∑–¥–∞–π—Ç–µ Service Account

   - –°–∫–∞—á–∞–π—Ç–µ JSON –∫–ª—é—á## üìÑ License



2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á** –∫–∞–∫ `google-credentials.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞MIT



3. **–î–∞–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–±–ª–∏—Ü–µ:**## ü§ù Contributing

   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `google-credentials.json`

   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ email –∏–∑ –ø–æ–ª—è `client_email`This is a production-ready template. Customize it for your specific needs:

   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à—É Google —Ç–∞–±–ª–∏—Ü—É

   - –ù–∞–∂–º–∏—Ç–µ "Share" ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ email ‚Üí –¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ "Editor"1. Adjust LLM prompts in `src/services/llm.ts`

2. Modify lead criteria

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:**3. Add custom filtering logic

   ```bash4. Extend Excel columns

   bun run sync:google5. Add database integration

   ```

## ‚ö° Performance Tips

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Google Sheets (A-I –∫–æ–ª–æ–Ω–∫–∏)

- **Rate Limiting** - Adjust delays in `joinChannels()` based on account age

| –ö–æ–ª–æ–Ω–∫–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |- **Message Filtering** - Add pre-filtering before LLM to reduce API calls

|---------|----------|----------|- **Batch Processing** - Consider batching messages for LLM analysis

| A | Lead Name | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ |- **Caching** - Cache LLM responses for similar messages

| B | Contact name | –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ |

| C | Position | –î–æ–ª–∂–Ω–æ—Å—Ç—å |## üìû Support

| D | Tr | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è |

| E | Phone number | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ |For issues:

| F | Industry Category | FMCG (–≤—Å–µ–≥–¥–∞) |1. Check logs for error messages

| G | Industry Name | Snacks, Bioximiya, drinks |2. Verify configuration

| H | Location | Toshkent |3. Review Telegram API documentation

| **I** | **Imported Locally** | **YES** (–¥–ª—è –ª–∏–¥–æ–≤ –∏–∑ Excel) |4. Check GramJS documentation: https://gram.js.org



### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤---



–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã **–¢–û–õ–¨–ö–û –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞**:**Built with ‚ù§Ô∏è using Bun, TypeScript, and GramJS**


- ‚úÖ –û–¥–∏–Ω —Ç–µ–ª–µ—Ñ–æ–Ω = –æ–¥–∏–Ω –ª–∏–¥
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (`+998 90 123 45 67` ‚Üí `+998901234567`)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–µ—á–∞—Ç–æ–∫ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –∫–æ–º–ø–∞–Ω–∏–π
- ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ü—Ä–∏–º–µ—Ä—ã –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:**
```
+998 90 123 45 67  = +998901234567 ‚úÖ
998-90-123-45-67   = 998901234567  ‚úÖ
+998 (90) 123-45-67 = +998901234567 ‚úÖ
```

### –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

| –†—É—Å—Å–∫–∏–π (Excel) | –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (Google Sheets) |
|-----------------|---------------------------|
| –ë–∏–æ—Ö–∏–º–∏—è | Bioximiya |
| –°–Ω–µ–∫–∏ | Snacks |
| –í–æ–¥–∞ | drinks |
| –ö–µ—à—å—é | snacks |

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
           SYNCHRONIZATION RESULTS         
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìä Total leads in Excel:    500
‚úÖ Successfully added:       48
‚ö†Ô∏è  Duplicates (skipped):    452
‚ùå Failed to add:            0
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

## üîç –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram —Å –≤–∞—à–∏–º–∏ credentials
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –í–≤–æ–¥ –∫–æ–¥–∞ –∏–∑ SMS (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
3. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏** - –°–æ–∑–¥–∞–µ—Ç—Å—è `SESSION_STRING` –≤ `.env`
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤** - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
5. **–ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ LLM** - –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Ollama
6. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
7. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É + –∏–º–µ–Ω–∏
8. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Excel —Å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

–ë–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–¥–ø–∏—Å–∏ –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º:
```
üì∏ –§–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é ‚Üí –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç ‚Üí –ê–Ω–∞–ª–∏–∑ LLM ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–∏–¥–∞
```

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- ‚úÖ **Rate limiting** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- ‚úÖ **Reconnection** - –ê–≤—Ç–æ-–ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
- ‚úÖ **Graceful shutdown** - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ (Ctrl+C)
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¶–≤–µ—Ç–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏** - –ù–µ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å –∫–æ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ö†Ô∏è **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env`** - –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏
- ‚ö†Ô∏è **–§–∞–π–ª—ã —Å–µ—Å—Å–∏–π** - –î–µ—Ä–∂–∏—Ç–µ `*.session` –≤ —Å–µ–∫—Ä–µ—Ç–µ
- ‚ö†Ô∏è **Google credentials** - `google-credentials.json` –≤ `.gitignore`
- ‚ö†Ô∏è **Rate limits** - –°–æ–±–ª—é–¥–∞–π—Ç–µ –ª–∏–º–∏—Ç—ã Telegram

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "Missing required environment variable"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

### "Authentication failed"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `API_ID` –∏ `API_HASH`
- –¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –∫–æ–¥–æ–º —Å—Ç—Ä–∞–Ω—ã (+998...)

### "FLOOD_WAIT" –æ—à–∏–±–∫–∞
- Telegram rate limit —Å—Ä–∞–±–æ—Ç–∞–ª
- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–æ–∂–¥–µ—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç
- –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤ –∏–ª–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏

### Ollama –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω: `ollama serve`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–æ–¥–µ–ª—å —Å–∫–∞—á–∞–Ω–∞: `ollama pull llama3.2`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `bun run test:ollama`

### LLM –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –≤ `src/services/llm.ts`
- LLM –æ–±—É—á–µ–Ω –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö: OKEY ‚Üí –°–Ω–µ–∫–∏, BIOLIFE ‚Üí –ë–∏–æ—Ö–∏–º–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –æ–¥–Ω–∞ –∏–∑ 4: –ë–∏–æ—Ö–∏–º–∏—è, –°–Ω–µ–∫–∏, –í–æ–¥–∞, –ö–µ—à—å—é

### Excel —Ñ–∞–π–ª –ø—É—Å—Ç–æ–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ª–∏–¥—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –∫—Ä–∏—Ç–µ—Ä–∏—è–º (—Ç–µ–ª–µ—Ñ–æ–Ω + –∫–∞—Ç–µ–≥–æ—Ä–∏—è)
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: `[28.11.2025] ‚úì Lead saved to ./leads.xlsx`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω—ã–µ (MIN_MESSAGE_LENGTH)

### Google Sheets: "Permission denied"
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Service Account email –¥–æ–±–∞–≤–ª–µ–Ω –≤ "Share"
- –ü—Ä–∞–≤–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "Editor", –Ω–µ "Viewer"
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `bun run test:google`

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫** - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ANALYZE_HISTORY=true` –∏ `HISTORY_LIMIT=50-100`
2. **–ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞** - –û—Ç–∫–ª—é—á–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—é `ANALYZE_HISTORY=false`
3. **–ú–µ–¥–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä** - –£–≤–µ–ª–∏—á—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏, —É–º–µ–Ω—å—à–∏—Ç–µ `HISTORY_LIMIT`
4. **–ë—ã—Å—Ç—Ä—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä** - –ú–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–æ 500–º—Å
5. **–ú–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–æ–≤** - –£–≤–µ–ª–∏—á—å—Ç–µ `CHANNEL_DELAY` –¥–æ 3000-5000–º—Å
6. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –£–≤–µ–ª–∏—á—å—Ç–µ `MIN_MESSAGE_LENGTH` —á—Ç–æ–±—ã –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

## üìö –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```json
{
  "telegram": "^2.25.14",    // GramJS - Telegram –∫–ª–∏–µ–Ω—Ç
  "exceljs": "^4.4.0",       // Excel —Ñ–∞–π–ª—ã
  "ollama": "^0.6.3",        // Ollama API –∫–ª–∏–µ–Ω—Ç
  "googleapis": "^166.0.0",  // Google Sheets API
  "input": "^1.0.1"          // –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–≤–æ–¥
}
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Ollama Setup

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ (macOS):**
```bash
curl -fsSL https://ollama.com/install.sh | sh
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Linux):**
```bash
curl -fsSL https://ollama.com/install.sh | sh
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Windows):**
–°–∫–∞—á–∞–π—Ç–µ —Å [ollama.com](https://ollama.com)

**–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:**
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
ollama serve
```

**–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏:**
```bash
ollama pull llama3.2
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –°–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π
ollama list

# –¢–µ—Å—Ç –º–æ–¥–µ–ª–∏
ollama run llama3.2
```

**–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `http://localhost:11434`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Å—Å–∏–∏ Telegram

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è `SESSION_STRING` –≤ `.env`:
```env
SESSION_STRING=1AgAOMTQ5LjE1NC4xNjcuNTEBu7/yxhKih3...
```

–≠—Ç–æ—Ç string –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∫–æ–¥–∞.

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∏—Ç–µ—Å—å SESSION_STRING - —ç—Ç–æ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –≤–∞—à–µ–º—É –∞–∫–∫–∞—É–Ω—Ç—É!

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:
- [Bun](https://bun.sh) - –ë—ã—Å—Ç—Ä—ã–π JavaScript runtime
- [GramJS](https://gram.js.org) - Telegram –∫–ª–∏–µ–Ω—Ç –¥–ª—è TypeScript
- [Ollama](https://ollama.com) - –õ–æ–∫–∞–ª—å–Ω—ã–π LLM
- [ExcelJS](https://github.com/exceljs/exceljs) - Excel —Ñ–∞–π–ª—ã
- [Google Sheets API](https://developers.google.com/sheets/api) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google

---

**–í–µ—Ä—Å–∏—è:** 1.2.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 30 –Ω–æ—è–±—Ä—è 2024  
**–ê–≤—Ç–æ—Ä:** @notprxgrammer

**–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ —Å ‚ù§Ô∏è –∏—Å–ø–æ–ª—å–∑—É—è Bun, TypeScript, –∏ GramJS**
